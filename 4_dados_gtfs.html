<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rafael H. M. Pereira">
<meta name="author" content="Daniel Herszenhut">

<title>Introdução à acessibilidade urbana - 4&nbsp; Dados GTFS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./5_gtfstools.html" rel="next">
<link href="./s3_dados_tp.html" rel="prev">
<link href="./images/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-YVERJQF9PJ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-YVERJQF9PJ', { 'anonymize_ip': true});
</script>


<meta property="og:title" content="Introdução à acessibilidade urbana - 4&nbsp; Dados GTFS">
<meta property="og:description" content="O formato GTFS é uma especificação aberta e colaborativa que visa descrever os principais componentes de uma rede de transporte público.">
<meta property="og:site-name" content="Introdução à acessibilidade urbana">
<meta name="twitter:title" content="Introdução à acessibilidade urbana - 4&nbsp; Dados GTFS">
<meta name="twitter:description" content="O formato GTFS é uma especificação aberta e colaborativa que visa descrever os principais componentes de uma rede de transporte público.">
<meta name="twitter:card" content="summary">
<meta name="citation_title" content="Introdução à acessibilidade urbana: um guia prático em R">
<meta name="citation_abstract" content="O objetivo deste livro é apresentar os conceitos e habilidades práticas necessárias para fazer estudos e avaliações de impacto de acessibilidade urbana. O livro começa dando uma visão geral sobre o conceito e os principais indicadores de acessibilidade. Em seguida, ensina como analisar dados espaciais e de redes de transporte para estimar níveis de acessibilidade por diferentes modos de transporte e como visualizar os resultados em forma de mapas e gráficos. O livro também familiariza o leitor com dados de redes de transporte público em formato GTFS e ensina como manipular e visualizar esse tipo de dado. Num dos seus principais capítulos, o livro ensina também como os dados e a metodologia apresentados nos capítulos anteriores podem ser utilizados para avaliar o impacto de projetos de transporte sobre as condições de acesso a oportunidades da população. Por fim, o livro apresenta como baixar, analisar e visualizar estimativas de acessibilidade já calculadas para cidades brasileiras e disponibilizadas pela equipe do Projeto Acesso a Oportunidades, do Ipea.">
<meta name="citation_author" content="Rafael H. M. Pereira">
<meta name="citation_author" content="Daniel Herszenhut">
<meta name="citation_publication_date" content="2022">
<meta name="citation_cover_date" content="2022">
<meta name="citation_year" content="2022">
<meta name="citation_fulltext_html_url" content="https://ipeagit.github.io/intro_access_book/">
<meta name="citation_language" content="pt">
<meta name="citation_book_title" content="Introdução à acessibilidade urbana: um guia prático em R">
<meta name="citation_reference" content="citation_title=Transport modelling in the age of big data;,citation_author=Cuauhtemoc Anda;,citation_author=Alexander Erath;,citation_author=Pieter Jacobus Fourie;,citation_publication_date=2017-08;,citation_cover_date=2017-08;,citation_year=2017;,citation_issue=sup1;,citation_doi=10.1080/12265934.2017.1281150;,citation_issn=1226-5934;,citation_volume=21;,citation_journal_title=International Journal of Urban Sciences;,citation_publisher=Routledge;">
<meta name="citation_reference" content="citation_title=Estimating the influence of crowding and travel time variability on accessibility to jobs in a large public transport network using smart card big data;,citation_author=Renato Arbex;,citation_author=Claudio B. Cunha;,citation_publication_date=2020-05;,citation_cover_date=2020-05;,citation_year=2020;,citation_doi=10.1016/j.jtrangeo.2020.102671;,citation_issn=09666923;,citation_volume=85;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=The sustainable mobility paradigm;,citation_author=David Banister;,citation_publication_date=2008-03;,citation_cover_date=2008-03;,citation_year=2008;,citation_issue=2;,citation_doi=10.1016/j.tranpol.2007.10.005;,citation_issn=0967070X;,citation_volume=15;,citation_language=en-US;,citation_journal_title=Transport Policy;">
<meta name="citation_reference" content="citation_title=The trilogy of distance, speed and time;,citation_author=David Banister;,citation_publication_date=2011-07;,citation_cover_date=2011-07;,citation_year=2011;,citation_issue=4;,citation_doi=10.1016/j.jtrangeo.2010.12.004;,citation_issn=09666923;,citation_volume=19;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=The world’s user-generated road map is more than 80% complete;,citation_abstract=OpenStreetMap, a crowdsourced geographic database, provides the only global-level, openly licensed source of geospatial road data, and the only national-level source in many countries. However, researchers, policy makers, and citizens who want to make use of OpenStreetMap (OSM) have little information about whether it can be relied upon in a particular geographic setting. In this paper, we use two complementary, independent methods to assess the completeness of OSM road data in each country in the world. First, we undertake a visual assessment of OSM data against satellite imagery, which provides the input for estimates based on a multilevel regression and poststratification model. Second, we fit sigmoid curves to the cumulative length of contributions, and use them to estimate the saturation level for each country. Both techniques may have more general use for assessing the development and saturation of crowd-sourced data. Our results show that in many places, researchers and policymakers can rely on the completeness of OSM, or will soon be able to do so. We find (i) that globally, OSM is \sim83% complete, and more than 40% of countriesincluding several in the developing worldhave a fully mapped street network; (ii) that well-governed countries with good Internet access tend to be more complete, and that completeness has a U-shaped relationship with population densityboth sparsely populated areas and dense cities are the best mapped; and (iii) that existing global datasets used by the World Bank undercount roads by more than 30%.;,citation_author=Christopher Barrington-Leigh;,citation_author=Adam Millard-Ball;,citation_publication_date=2017-08;,citation_cover_date=2017-08;,citation_year=2017;,citation_issue=8;,citation_doi=10.1371/journal.pone.0180698;,citation_issn=1932-6203;,citation_volume=12;,citation_language=en-US;,citation_journal_title=PLOS ONE;,citation_publisher=Public Library of Science;">
<meta name="citation_reference" content="citation_title=Sustainable accessibility: A conceptual framework to integrate transport and land use plan-making. Two test-applications in the Netherlands and a reflection on the way forward;,citation_author=L. Bertolini;,citation_author=F. Clercq;,citation_author=L. Kapoen;,citation_publication_date=2005-05;,citation_cover_date=2005-05;,citation_year=2005;,citation_issue=3;,citation_doi=10.1016/j.tranpol.2005.01.006;,citation_issn=0967070X;,citation_volume=12;,citation_language=en-US;,citation_journal_title=Transport Policy;">
<meta name="citation_reference" content="citation_title=How to get there? A critical assessment of accessibility objectives and indicators in metropolitan transportation plans;,citation_author=Geneviève Boisjoly;,citation_author=Ahmed M. El-Geneidy;,citation_publication_date=2017-04;,citation_cover_date=2017-04;,citation_year=2017;,citation_doi=10.1016/j.tranpol.2016.12.011;,citation_issn=0967070X;,citation_volume=55;,citation_language=en-US;,citation_journal_title=Transport Policy;">
<meta name="citation_reference" content="citation_title=Impactos da expansão do metrô de Fortaleza sobre o acesso a oportunidades de emprego, saúde e educação;,citation_abstract=Este estudo apresenta os resultados de uma avaliação ex-ante do impacto da Linha Leste do metrô de Fortaleza no acesso da população a oportunidades de emprego, saúde e educação. Para isso, analisamos como a quantidade de empregos, estabelecimentos de saúde e escolas acessíveis por transporte público deverá mudar com a implantação da nova Linha Leste do metrô e as demais alterações previstas no Plano de Acessibilidade Sustentável de Fortaleza (Pasfor). Os resultados indicam que, isoladamente, os investimentos no sistema de trilhos poderiam aumentar em média de 3,1% a 5,6% a quantidade de empregos, escolas e serviços de saúde acessíveis por transporte público. No entanto, a redução planejada na oferta dos serviços de ônibus deverá comprometer o potencial impacto positivo que seria obtido com a expansão do metrô. Com isso, estima-se que haveria uma queda de -7,4% a -8,1% na quantidade de oportunidades acessíveis por transporte público comparado ao ano base de 2019. Via de regra, essa queda será maior nos bairros de renda média e baixa, indicando que as intervenções sobre a rede de transporte público de Fortaleza terão impacto regressivo, aumentando a desigualdade de acesso a oportunidades. O estudo traz importantes lições sobre como projetos de expansão de infraestrutura de transporte precisam ser planejados de maneira coordenada com a operação de sistemas de transporte público para potencializar os benefícios de acessibilidade de políticas de transporte urbano.;,citation_author=Carlos Kaue Vieira Braga;,citation_author=Diego Bogado Tomasiello;,citation_author=Daniel Herszenhut;,citation_author=João Lucas Albuquerque Oliveira;,citation_author=Rafael H. M. Pereira;,citation_publication_date=2022-05;,citation_cover_date=2022-05;,citation_year=2022;,citation_language=pt-BR;,citation_journal_title=http://www.ipea.gov.br;,citation_publisher=Instituto de Pesquisa Econômica Aplicada (Ipea);">
<meta name="citation_reference" content="citation_title=H3: Uber’s Hexagonal Hierarchical Spatial Index;,citation_author=Isaac Brodsky;,citation_publication_date=2018-06;,citation_cover_date=2018-06;,citation_year=2018;,citation_language=en-US;,citation_journal_title=Uber Engineering Blog;,citation_publisher=https://eng.uber.com/h3/;">
<meta name="citation_reference" content="citation_title=Accessibility Tools for Transport Policy and Planning;,citation_author=Benjamin Büttner;,citation_editor=Roger Vickerman;,citation_publication_date=2021-01;,citation_cover_date=2021-01;,citation_year=2021;,citation_doi=10.1016/B978-0-08-102671-7.10618-9;,citation_isbn=978-0-08-102672-4;,citation_language=en-US;,citation_inbook_title=International Encyclopedia of Transportation;">
<meta name="citation_reference" content="citation_title=An Investigation into the Completeness of, and the Updates to, OpenStreetMap Data in a Heterogeneous Area in Brazil;,citation_abstract=The integration of user-generated content made in a collaborative environment is being increasingly considered a valuable input to reference maps, even from official map agencies such as USGS and Ordnance Survey. In Brazil, decades of lack of investment has resulted in a topographic map coverage that is both outdated and unequally distributed throughout the territory. This paper aims to analyze the spatial distribution of updates of OpenStreetMap in rural and urban areas in the country to understand the patterns of user updates and its correlation with other economic and developmental variables. This analysis will contribute to generating the knowledge needed in order to consider the use of this data as part of a reference layer of the National Spatial Database Infrastructure as well to design strategies to encourage user action in specific areas.;,citation_author=Silvana Philippi Camboim;,citation_author=João Vitor Meza Bravo;,citation_author=Claudia Robbi Sluter;,citation_publication_date=2015-09;,citation_cover_date=2015-09;,citation_year=2015;,citation_issue=3;,citation_doi=10.3390/ijgi4031366;,citation_issn=2220-9964;,citation_volume=4;,citation_language=en-US;,citation_journal_title=ISPRS International Journal of Geo-Information;,citation_publisher=Multidisciplinary Digital Publishing Institute;">
<meta name="citation_reference" content="citation_title=Accessible Cities and Regions: A Framework for Sustainable Transport and Urbanism in the 21st Century;,citation_author=Robert Cervero;,citation_publication_date=2005-08;,citation_cover_date=2005-08;,citation_year=2005;,citation_issue=UCB-ITS-VWP-2005-3;,citation_journal_title=Center for Future Urban Transport Working Paper;">
<meta name="citation_reference" content="citation_title=Transport and social exclusion in London;,citation_author=A Church;,citation_author=M Frost;,citation_author=K Sullivan;,citation_publication_date=2000-07;,citation_cover_date=2000-07;,citation_year=2000;,citation_issue=3;,citation_doi=10.1016/S0967-070X(00)00024-X;,citation_issn=0967070X;,citation_volume=7;,citation_language=en-US;,citation_journal_title=Transport Policy;">
<meta name="citation_reference" content="citation_title=Evidence-Based Transit and Land Use Sketch Planning Using Interactive Accessibility Methods on Combined Schedule and Headway-Based Networks;,citation_author=Matthew Wigginton Conway;,citation_author=Andrew Byrd;,citation_author=Marco Linden;,citation_publication_date=2017-01;,citation_cover_date=2017-01;,citation_year=2017;,citation_issue=1;,citation_doi=10.3141/2653-06;,citation_issn=0361-1981, 2169-4052;,citation_volume=2653;,citation_language=en-US;,citation_journal_title=Transportation Research Record: Journal of the Transportation Research Board;">
<meta name="citation_reference" content="citation_title=Opportunities for Transport Mode Change: An Exploration of a Disaggregated Approach;,citation_author=Martin Dijst;,citation_author=Tom Jong;,citation_author=Jan Ritsema Eck;,citation_publication_date=2002-06;,citation_cover_date=2002-06;,citation_year=2002;,citation_issue=3;,citation_doi=10.1068/b12811;,citation_issn=0265-8135, 1472-3417;,citation_volume=29;,citation_language=en-US;,citation_journal_title=Environment and Planning B: Planning and Design;">
<meta name="citation_reference" content="citation_title=Moving from trip-based to activity-based measures of accessibility;,citation_author=Xiaojing Dong;,citation_author=Moshe E. Ben-Akiva;,citation_author=John L. Bowman;,citation_author=Joan L. Walker;,citation_publication_date=2006-02;,citation_cover_date=2006-02;,citation_year=2006;,citation_issue=2;,citation_doi=10.1016/j.tra.2005.05.002;,citation_issn=09658564;,citation_volume=40;,citation_language=en-US;,citation_journal_title=Transportation Research Part A: Policy and Practice;">
<meta name="citation_reference" content="citation_title=The cost of equity: Assessing transit accessibility and social disparity using total travel cost;,citation_author=Ahmed El-Geneidy;,citation_author=David Levinson;,citation_author=Ehab Diab;,citation_author=Genevieve Boisjoly;,citation_author=David Verbich;,citation_author=Charis Loong;,citation_publication_date=2016-09;,citation_cover_date=2016-09;,citation_year=2016;,citation_doi=10.1016/j.tra.2016.07.003;,citation_issn=09658564;,citation_volume=91;,citation_language=en-US;,citation_journal_title=Transportation Research Part A: Policy and Practice;">
<meta name="citation_reference" content="citation_title=Rural accessibility, social inclusion and social justice: Towards conceptualisation;,citation_author=John Farrington;,citation_author=Conor Farrington;,citation_publication_date=2005-03;,citation_cover_date=2005-03;,citation_year=2005;,citation_issue=1;,citation_doi=10.1016/j.jtrangeo.2004.10.002;,citation_issn=09666923;,citation_volume=13;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=Accessibility evaluation of land-use and transport strategies: Review and research directions;,citation_author=Karst Geurs;,citation_author=Bert Wee;,citation_publication_date=2004-06;,citation_cover_date=2004-06;,citation_year=2004;,citation_issue=2;,citation_doi=10.1016/j.jtrangeo.2003.10.005;,citation_issn=09666923;,citation_volume=12;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=Accessibility, affordability and equity: Assessing “pro-poor” public transport subsidies in Bogotá;,citation_abstract=Public transport has claimed a preferential position in recent urban development agendas internationally. Rising interest on inclusive development of cities at different levels of urban policy involves new opportunities and challenges for increasingly urban societies. In cities of the Global South, in addition to institutional and physical challenges for the development of efficient and inclusive public transport, local governments face the challenge of making public transport affordable for a large share of the population in conditions of poverty. In order to meet these challenges, several public transport systems throughout have implemented targeted subsidies for specific social groups such as students, the elderly and people with reduced mobility, and more recently for the poor. The government of Bogotá has implemented a pro-poor public transport subsidy scheme that aims at alleviating the financial burden of poor households for accessing the city’s public transport system. This research develops an analysis of the effects of such subsidy from an accessibility perspective using potential accessibility measures to employment opportunities and assess its impact on equity. The research builds on the hypothesis that accessibility is a multi-dimensional construct that can benefit from the decrease in economic as much as gains in time costs. Results from the analysis show that both the current structure of the pro-poor subsidies in Bogotá and alternative scenarios for increasing its coverage are progressive, improving accessibility and equity for those with access to the subsidy. The paper provides valuable insights for the analysis of similar policies in other urban contexts in the Global South.;,citation_author=Luis A. Guzman;,citation_author=Daniel Oviedo;,citation_publication_date=2018-09;,citation_cover_date=2018-09;,citation_year=2018;,citation_doi=10.1016/j.tranpol.2018.04.012;,citation_issn=0967-070X;,citation_volume=68;,citation_language=en-US;,citation_journal_title=Transport Policy;">
<meta name="citation_reference" content="citation_title=Gtfstools: General Transit Feed Specification (GTFS) Editing and Analysing Tools;,citation_author=Daniel Herszenhut;,citation_author=Rafael H. M. Pereira;,citation_author=Pedro R. Andrade;,citation_author=João Bazzo;,citation_publication_date=2022-05;,citation_cover_date=2022-05;,citation_year=2022;,citation_doi=10.5281/ZENODO.6577028;,citation_language=en-US;,citation_publisher=Zenodo;">
<meta name="citation_reference" content="citation_title=The impact of transit monetary costs on transport inequality;,citation_author=Daniel Herszenhut;,citation_author=Rafael H. M. Pereira;,citation_author=Licinio da Silva Portugal;,citation_author=Matheus Henrique de Sousa Oliveira;,citation_publication_date=2022-02;,citation_cover_date=2022-02;,citation_year=2022;,citation_doi=10.1016/j.jtrangeo.2022.103309;,citation_issn=09666923;,citation_volume=99;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=Calculating place-based transit accessibility: Methods, tools and algorithmic dependence;,citation_author=Christopher Higgins;,citation_author=Matthew Palm;,citation_author=Amber DeJohn;,citation_author=Luna Xi;,citation_author=James Vaughan;,citation_author=Steven Farber;,citation_author=Michael Widener;,citation_author=Eric Miller;,citation_publication_date=2022-02;,citation_cover_date=2022-02;,citation_year=2022;,citation_issue=1;,citation_doi=10.5198/jtlu.2022.2012;,citation_issn=1938-7849;,citation_volume=15;,citation_journal_title=Journal of Transport and Land Use;">
<meta name="citation_reference" content="citation_title=Smart cities, big data and urban policy: Towards urban analytics for the long run;,citation_author=Jens Kandt;,citation_author=Michael Batty;,citation_publication_date=2021-02;,citation_cover_date=2021-02;,citation_year=2021;,citation_doi=10.1016/j.cities.2020.102992;,citation_issn=0264-2751;,citation_volume=109;,citation_language=en-US;,citation_journal_title=Cities;">
<meta name="citation_reference" content="citation_title=Space-time accessibility measures: A geocomputational algorithm with a focus on the feasible opportunity set and possible activity duration;,citation_author=Hyun-Mi Kim;,citation_author=Mei-Po Kwan;,citation_publication_date=2003-05;,citation_cover_date=2003-05;,citation_year=2003;,citation_issue=1;,citation_doi=10.1007/s101090300104;,citation_issn=1435-5930, 1435-5949;,citation_volume=5;,citation_journal_title=Journal of Geographical Systems;">
<meta name="citation_reference" content="citation_title=From mobility to accessibility: Transforming urban transportation and land-use planning;,citation_author=Jonathan Levine;,citation_author=Joe Grengs;,citation_author=Louis A. Merlin;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;">
<meta name="citation_reference" content="citation_title=Towards a general theory of access;,citation_author=David M. Levinson;,citation_author=Hao Wu;,citation_publication_date=2020-06;,citation_cover_date=2020-06;,citation_year=2020;,citation_issue=1;,citation_doi=10.5198/jtlu.2020.1660;,citation_issn=1938-7849;,citation_volume=13;,citation_language=en-US;,citation_journal_title=Journal of Transport and Land Use;">
<meta name="citation_reference" content="citation_title=Transport access manual: A guide for measuring connection between people and places;,citation_author=David Levinson;,citation_author=David King;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;">
<meta name="citation_reference" content="citation_title=A method to evaluate equitable accessibility: Combining ethical theories and accessibility-based approaches;,citation_abstract=In this paper, we present the case that traditional transport appraisal methods do not sufficiently capture the social dimensions of mobility and accessibility. However, understanding this is highly relevant for policymakers to understand the impacts of their transport decisions. These dimensions include the distribution of mobility and accessibility levels over particular areas or for specific population groups, as well as how this may affect various social outcomes, including their levels of participation, social inclusion and community cohesion. In response, we propose a method to assess the socially relevant accessibility impacts (SRAIs) of policies in some of these key dimensions. The method combines the use of underlying ethics principles, more specifically the theories of egalitarianism and sufficientarianism, in combination with accessibility-based analysis and the Lorenz curve and Gini index. We then demonstrate the method in a case study example. Our suggestion is that policymakers can use these ethical perspectives to determine the equity of their policies decisions and to set minimum standards for local transport delivery. This will help them to become more confident in the development and adoption of new decision frameworks that promote accessibility over mobility and which also disaggregate the costs and benefits of transport policies over particular areas or for specific under-served population groups.;,citation_author=Karen Lucas;,citation_author=Bert Wee;,citation_author=Kees Maat;,citation_publication_date=2016-05;,citation_cover_date=2016-05;,citation_year=2016;,citation_issue=3;,citation_doi=10.1007/s11116-015-9585-2;,citation_issn=1572-9435;,citation_volume=43;,citation_language=en-US;,citation_journal_title=Transportation;">
<meta name="citation_reference" content="citation_title=Transport poverty and its adverse social consequences;,citation_author=Karen Lucas;,citation_author=Giulio Mattioli;,citation_author=Ersilia Verlinghieri;,citation_author=Alvaro Guzman;,citation_publication_date=2016-12;,citation_cover_date=2016-12;,citation_year=2016;,citation_issue=6;,citation_doi=10.1680/jtran.15.00073;,citation_issn=0965-092X, 1751-7710;,citation_volume=169;,citation_language=en-US;,citation_journal_title=Proceedings of the Institution of Civil Engineers - Transport;">
<meta name="citation_reference" content="citation_title=Measures of Spatial Accessibility to Health Care in a GIS Environment: Synthesis and a Case Study in the Chicago Region;,citation_author=Wei Luo;,citation_author=Fahui Wang;,citation_publication_date=2003-12;,citation_cover_date=2003-12;,citation_year=2003;,citation_issue=6;,citation_doi=10.1068/b29120;,citation_issn=0265-8135, 1472-3417;,citation_volume=30;,citation_language=en-US;,citation_journal_title=Environment and Planning B: Planning and Design;,citation_publisher=SAGE Publications Sage UK: London, England;">
<meta name="citation_reference" content="citation_title=Understanding transport-related social exclusion through the lens of capabilities approach;,citation_author=Gregório Luz;,citation_author=Licinio Portugal;,citation_publication_date=2022-07;,citation_cover_date=2022-07;,citation_year=2022;,citation_issue=4;,citation_doi=10.1080/01441647.2021.2005183;,citation_issn=0144-1647;,citation_volume=42;,citation_journal_title=Transport Reviews;,citation_publisher=Routledge;">
<meta name="citation_reference" content="citation_title=Justice in transport as justice in accessibility: Applying Walzer’s “Spheres of Justice” to the transport sector;,citation_author=Karel Martens;,citation_publication_date=2012-11;,citation_cover_date=2012-11;,citation_year=2012;,citation_issue=6;,citation_doi=10.1007/s11116-012-9388-7;,citation_issn=0049-4488, 1572-9435;,citation_volume=39;,citation_language=en-US;,citation_journal_title=Transportation;">
<meta name="citation_reference" content="citation_title=Pioneering Open Data Standards: The GTFS Story;,citation_author=Bibiana McHugh;,citation_editor=Brett Goldstein;,citation_editor=Lauren Dyson;,citation_publication_date=2013;,citation_cover_date=2013;,citation_year=2013;,citation_isbn=978-0-615-88908-5;,citation_inbook_title=Beyond Transparency: Open Data and the Future of Civic Innovation;">
<meta name="citation_reference" content="citation_title=Accessibility: Measurement and application in transportation planning;,citation_author=Eric J. Miller;,citation_publication_date=2018-09;,citation_cover_date=2018-09;,citation_year=2018;,citation_issue=5;,citation_doi=10.1080/01441647.2018.1492778;,citation_issn=0144-1647;,citation_volume=38;,citation_journal_title=Transport Reviews;,citation_publisher=Routledge;">
<meta name="citation_reference" content="citation_title=A utility-based travel impedance measure for public transit network accessibility;,citation_author=Neema Nassir;,citation_author=Mark Hickman;,citation_author=Ali Malekzadeh;,citation_author=Elnaz Irannezhad;,citation_publication_date=2016-06;,citation_cover_date=2016-06;,citation_year=2016;,citation_doi=10.1016/j.tra.2016.03.007;,citation_issn=09658564;,citation_volume=88;,citation_language=en-US;,citation_journal_title=Transportation Research Part A: Policy and Practice;">
<meta name="citation_reference" content="citation_title=Equity of Urban Service Delivery: A Comparison of Different Accessibility Measures;,citation_author=Tijs Neutens;,citation_author=Tim Schwanen;,citation_author=Frank Witlox;,citation_author=Philippe De Maeyer;,citation_publication_date=2010-07;,citation_cover_date=2010-07;,citation_year=2010;,citation_issue=7;,citation_doi=10.1068/a4230;,citation_issn=0308-518X, 1472-3409;,citation_volume=42;,citation_language=en-US;,citation_journal_title=Environment and Planning A: Economy and Space;">
<meta name="citation_reference" content="citation_title=An analysis of day-to-day variations in individual spacetime accessibility;,citation_author=Tijs Neutens;,citation_author=Matthias Delafontaine;,citation_author=Darren M. Scott;,citation_author=Philippe De Maeyer;,citation_publication_date=2012-07;,citation_cover_date=2012-07;,citation_year=2012;,citation_doi=10.1016/j.jtrangeo.2012.04.001;,citation_issn=0966-6923;,citation_volume=23;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;,citation_series_title=Special Issue on Time Geography;">
<meta name="citation_reference" content="citation_title=Measuring accessibility: Positive and normative implementations of various accessibility indicators;,citation_author=Antonio Páez;,citation_author=Darren M. Scott;,citation_author=Catherine Morency;,citation_publication_date=2012-11;,citation_cover_date=2012-11;,citation_year=2012;,citation_doi=10.1016/j.jtrangeo.2012.03.016;,citation_issn=09666923;,citation_volume=25;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=Demand and level of service inflation in Floating Catchment Area (FCA) methods;,citation_author=Antonio Paez;,citation_author=Christopher D. Higgins;,citation_author=Salvatore F. Vivona;,citation_editor=Tayyab Ikram Shah;,citation_publication_date=2019-06;,citation_cover_date=2019-06;,citation_year=2019;,citation_issue=6;,citation_doi=10.1371/journal.pone.0218773;,citation_issn=1932-6203;,citation_volume=14;,citation_language=en-US;,citation_journal_title=PLOS ONE;,citation_publisher=Public Library of Science San Francisco, CA USA;">
<meta name="citation_reference" content="citation_title=Accessibility instruments for planning practice: A review of European experiences;,citation_author=Enrica Papa;,citation_author=Cecilia Silva;,citation_author=Marco Te Brömmelstroet;,citation_author=Angela Hull;,citation_publication_date=2015-06;,citation_cover_date=2015-06;,citation_year=2015;,citation_doi=10.5198/jtlu.2015.585;,citation_issn=1938-7849;,citation_journal_title=Journal of Transport and Land Use;">
<meta name="citation_reference" content="citation_title=Distributive justice and equity in transportation;,citation_abstract=Over the past decades, transport researchers and policy-makers have devoted increasing attention to questions about justice and equity. Nonetheless, there is still little engagement with theories in political philosophy to frame what justice means in the context of transport policies. This paper reviews key theories of justice (utilitarianism, libertarianism, intuitionism, Rawls’ egalitarianism, and Capability Approaches (CAs)) and critically evaluates the insights they generate when applied to transport. Based on a combination of Rawlsian and CAs, we propose that distributive justice concerns over transport disadvantage and social exclusion should focus primarily on accessibility as a human capability. This means that, in policy evaluation, a detailed analysis of the distributional effects of transport policies should take account of the setting of minimum standards of accessibility to key destinations and the extent to which these policies respect individuals’ rights and prioritise disadvantaged groups, reduce inequalities of opportunities, and mitigate transport externalities. A full account of justice in transportation requires a more complete understanding of accessibility than traditional approaches have been able to deliver to date.;,citation_author=Rafael H. M. Pereira;,citation_author=Tim Schwanen;,citation_author=David Banister;,citation_publication_date=2017-03;,citation_cover_date=2017-03;,citation_year=2017;,citation_issue=2;,citation_doi=10.1080/01441647.2016.1257660;,citation_issn=0144-1647, 1464-5327;,citation_volume=37;,citation_language=en-US;,citation_journal_title=Transport Reviews;">
<meta name="citation_reference" content="citation_title=Desigualdades socioespaciais de acesso a oportunidades nas cidades brasileiras, 2019;,citation_author=Rafael H. M. Pereira;,citation_author=Carlos Kaue Vieira Braga;,citation_author=Bernardo Serra;,citation_author=Vanessa Nadalin;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_language=pt-PT;,citation_technical_report_institution=Instituto de Pesquisa Econômica Aplicada (Ipea);,citation_technical_report_number=2535;">
<meta name="citation_reference" content="citation_title=R5r: Rapid Realistic Routing on Multimodal Transport Networks with R&amp;amp;amp;lt;sup&amp;gt;5&amp;lt;/sup&amp;gt; in R;,citation_author=Rafael H. M. Pereira;,citation_author=Marcus Saraiva;,citation_author=Daniel Herszenhut;,citation_author=Carlos Kaue Vieira Braga;,citation_author=Matthew Wigginton Conway;,citation_publication_date=2021-03;,citation_cover_date=2021-03;,citation_year=2021;,citation_doi=10.32866/001c.21262;,citation_language=en-US;,citation_journal_title=Transport Findings;,citation_publisher=Network Design Lab;">
<meta name="citation_reference" content="citation_title=Transportation Equity;,citation_abstract=Transportation equity is a way to frame distributive justice concerns in relation to how social, economic, and government institutions shape the distribution of transportation benefits and burdens in society. It focuses on the evaluative standards used to judge the differential impacts of policies and plans, asking who benefits from and is burdened by them and to what extent. Questions of transportation equity involve both sufficientarian and egalitarian concerns with both absolute levels of wellbeing, transport-related poverty and social exclusion as well as with relative levels of transport-related inequalities. Ultimately, the study of transport equity explores the multiple channels through which transport and land use policies can create conditions for more inclusive cities and transport systems that allow different people to flourish, to satisfy their basic needs and lead a meaningful life. Transportation equity issues broadly encompass how policy decisions shape societal levels of environmental externalities and what groups are more or less exposed to them, as well as how those decisions affect the lives of different groups in terms of their ability to access life-enhancing opportunities such as employment, healthcare, and education. Equity is a crucial part of a broader concern with transport and mobility justice. The call for transport justice goes beyond distributive concerns, and yet justice cannot be achieved withoutequity.;,citation_author=Rafael H. M. Pereira;,citation_author=Alex Karner;,citation_editor=Roger Vickerman;,citation_publication_date=2021-01;,citation_cover_date=2021-01;,citation_year=2021;,citation_doi=10.1016/B978-0-08-102671-7.10053-3;,citation_isbn=978-0-08-102672-4;,citation_language=en-US;,citation_inbook_title=International Encyclopedia of Transportation;">
<meta name="citation_reference" content="citation_title=Accessibility: Transport Accessibility Measures;,citation_author=Rafael H. M. Pereira;,citation_author=Daniel Herszenhut;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=Aopdata: Data from the Access to Opportunities Project;,citation_author=Rafael H. M. Pereira;,citation_author=Daniel Herszenhut;,citation_author=Carlos K. V. Braga;,citation_author=Diego B. Tomasiello;,citation_author=Marcus Saraiva;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=Distribuição espacial de características sociodemográficas e localização de empregos e serviços públicos das vinte maiores cidades do Brasil;,citation_author=Rafael H. M. Pereira;,citation_author=Daniel Herszenhut;,citation_author=Carlos Kauê Vieira Braga;,citation_author=João Pedro Bazzo;,citation_author=João Lucas Albuquerque Oliveira;,citation_author=João Pedro Parga;,citation_author=Marcus Saraiva;,citation_author=Luiz Pedro Silva;,citation_author=Lucas Warwar;,citation_author=Diego Bogado Tomasiello;,citation_publication_date=2022-06;,citation_cover_date=2022-06;,citation_year=2022;,citation_doi=10.38116/td2772;,citation_issn=ISSN 1415-4765;,citation_volume=2772;,citation_language=pt-PT;,citation_journal_title=Texto para Discussão IPEA;,citation_publisher=Instituto de Pesquisa Econômica Aplicada (Ipea);">
<meta name="citation_reference" content="citation_title=Estimativas de acessibilidade a empregos e serviços públicos via transporte ativo, público e privado nas 20 maiores cidades do Brasil em 2017, 2018, 2019;,citation_author=Rafael H. M. Pereira;,citation_author=Carlos Kauê Vieira Braga;,citation_author=Daniel Herszenhut;,citation_author=Marcus Saraiva;,citation_author=Diego Bogado Tomasiello;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_volume=2800;,citation_language=pt-PT;,citation_journal_title=Texto para Discussão IPEA;,citation_publisher=Instituto de Pesquisa Econômica Aplicada (Ipea);">
<meta name="citation_reference" content="citation_title=Exploring the time geography of public transport networks with the Gtfs2gps package;,citation_abstract=The creation of the General Transit Feed Specification (GTFS) in the mid-2000s provided a new data format for cities to organize and share digital information on their public transport systems. GTFS feeds store geolocated data on public transport networks, including information on routes, stops, timetables, and service levels. The GTFS standard is now widely adopted by thousands of transport authorities and a wide variety of software applications for different purposes, including trip planning, timetable creation and accessibility analysis. Yet, there is still a lack of tools to parse GTFS data in a way that allows one to analyze the complex spatial and temporal patterns of public transport systems. This paper presents gtfs2gps, a new computational tool to easily process GTFS data that allows one to analyze the space-time trajectories of public transport vehicles at fine spatial and temporal resolutions. gtfs2gps is an open-source R package that employs parallel computing to convert GTFS feeds from relational text files into a data table format similar to GPS records with the timestamps of vehicles in every single trip. This paper explains the package functionalities and demonstrates how gtfs2gps can be used to articulate key concepts in time geography to explore and visualize the spatial and temporal patterns of public transport networks. The paper is accompanied by a computational notebook in R Markdown that allows one to easily reproduce the results in this paper or even replicate the analysis and data visualizations for other contexts where GTFS data is available. Given the widespread use of GTFS by transport agencies, gtfs2gps opens new possibilities for researchers to examine the time geography of public transport systems in urban areas across the globe.;,citation_author=Rafael H. M. Pereira;,citation_author=Pedro R. Andrade;,citation_author=João Pedro Bazzo Vieira;,citation_publication_date=2022-04;,citation_cover_date=2022-04;,citation_year=2022;,citation_doi=10.31235/osf.io/qydr6;,citation_language=en-US;,citation_publisher=SocArXiv;">
<meta name="citation_reference" content="citation_title=An International Comparison of Equity in Accessibility to Jobs: London, São Paulo and the Randstad;,citation_abstract=We analyze the impact of different accessibility measures on the interpretation of associated equity analysis using the Gini Coefficient and the (pseudo) Palma Ratio, and the impact of the method of assigning zonal accessibility on Gini estimation results using four different alternatives. Two types of potential accessibility measures (zonal and person-based) and two ratios of potential jobs to potential population (intra-modal and multi-modal) are estimated for car and transit in the Netherlands’ Randstad region, Greater London, and São Paulo relying on network data, schedule-based data, and speed profiles. Gini results are heavily influenced by the accessibility indicator and the method of assignment. The Palma ratio is also influenced by the choice of accessibility indicator, with the person-based potential accessibility measure tending to show greater inequity.;,citation_author=John P. Pritchard;,citation_author=Diego Tomasiello;,citation_author=Mariana Giannotti;,citation_author=Karst Geurs;,citation_publication_date=2019-02;,citation_cover_date=2019-02;,citation_year=2019;,citation_doi=10.32866/7412;,citation_language=en-US;,citation_journal_title=Findings;,citation_publisher=Findings Press;">
<meta name="citation_reference" content="citation_title=Accessibility instruments in planning practice: Bridging the implementation gap;,citation_author=Cecília Silva;,citation_author=Luca Bertolini;,citation_author=Marco Brömmelstroet;,citation_author=Dimitris Milakis;,citation_author=Enrica Papa;,citation_publication_date=2017-01;,citation_cover_date=2017-01;,citation_year=2017;,citation_doi=10.1016/j.tranpol.2016.09.006;,citation_issn=0967-070X;,citation_volume=53;,citation_language=en-US;,citation_journal_title=Transport Policy;">
<meta name="citation_reference" content="citation_title=Transport Modes and Accessibility;,citation_abstract=Accessibility by distinguished transport modes is probably the most important concept in transport geography and transport planning: it expresses that the transport system aims to provide access to places where people want to carry out activities. But it is also a concept for which many definitions and indicators are available, each characterized by their own pros and cons. This contribution discusses types of indicators and how to choose between indicators for as specific case. In addition, it explains that information and communication technology (ICT) increasingly plays a dominant role in people’s life as far as (travel to) activities are concerned, and consequently the importance of ICT for accessibility analyses also increases. Finally, it presents several challenges for future research.;,citation_author=Bert Wee;,citation_editor=Roger Vickerman;,citation_publication_date=2021-01;,citation_cover_date=2021-01;,citation_year=2021;,citation_doi=10.1016/B978-0-08-102671-7.10402-6;,citation_isbn=978-0-08-102672-4;,citation_language=en-US;,citation_inbook_title=International Encyclopedia of Transportation;">
<meta name="citation_reference" content="citation_title=Accessibility and equity: A conceptual framework and research agenda;,citation_author=Bert Wee;,citation_publication_date=2022-10;,citation_cover_date=2022-10;,citation_year=2022;,citation_doi=10.1016/j.jtrangeo.2022.103421;,citation_issn=09666923;,citation_volume=104;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=Urban transport policies in Brazil: The creation of a discriminatory mobility system;,citation_author=Eduardo Alcantara Vasconcellos;,citation_publication_date=2018-02;,citation_cover_date=2018-02;,citation_year=2018;,citation_doi=10.1016/j.jtrangeo.2017.08.014;,citation_issn=0966-6923;,citation_volume=67;,citation_language=en-US;,citation_journal_title=Journal of Transport Geography;">
<meta name="citation_reference" content="citation_title=Assessing the potential of bus rapid transit-led network restructuring for enhancing affordable access to employment  The case of Johannesburg’s Corridors of Freedom;,citation_author=Christoffel Venter;,citation_publication_date=2016-11;,citation_cover_date=2016-11;,citation_year=2016;,citation_doi=10.1016/j.retrec.2016.05.006;,citation_issn=07398859;,citation_volume=59;,citation_language=en-US;,citation_journal_title=Research in Transportation Economics;">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Dados GTFS</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introdução à acessibilidade urbana</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/ipeaGIT/aop_curso" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Apresentação</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./s1_intro.html" class="sidebar-item-text sidebar-link">SEÇÃO 1: Introdução à acessibilidade urbana</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_conceito.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">O que é acessibilidade?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_indicadores.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Medidas de acessibilidade</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./s2_calculo.html" class="sidebar-item-text sidebar-link">SEÇÃO 2: Como calcular acessibilidade urbana</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_calculando_acesso.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Calculando estimativas de acessibilidade em R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./s3_dados_tp.html" class="sidebar-item-text sidebar-link">SEÇÃO 3: Dados de transporte público</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_dados_gtfs.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Dados GTFS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_gtfstools.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulação e visualização de dados GTFS</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./s4_avaliacao_impacto.html" class="sidebar-item-text sidebar-link">SEÇÃO 4: Avaliação de impacto de projetos de transporte</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6_cenarios_transporte.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Comparando a acessibilidade entre dois cenários de transporte</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./s5_dados_aop.html" class="sidebar-item-text sidebar-link">SEÇÃO 5: Dados do Projeto AOP</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7_aopdata_populacao.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Dados de população e socioeconômicos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8_aopdata_uso_solo.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Dados de distribuição espacial de oportunidades</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9_aopdata_acessibilidade.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Estimativas de acessibilidade</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">Referências bibliográficas</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#estrutura-de-arquivos-gtfs" id="toc-estrutura-de-arquivos-gtfs" class="nav-link active" data-scroll-target="#estrutura-de-arquivos-gtfs"><span class="toc-section-number">4.1</span>  Estrutura de arquivos GTFS</a>
  <ul class="collapse">
  <li><a href="#agency.txt" id="toc-agency.txt" class="nav-link" data-scroll-target="#agency.txt"><span class="toc-section-number">4.1.1</span>  agency.txt</a></li>
  <li><a href="#stops.txt" id="toc-stops.txt" class="nav-link" data-scroll-target="#stops.txt"><span class="toc-section-number">4.1.2</span>  stops.txt</a></li>
  <li><a href="#routes.txt" id="toc-routes.txt" class="nav-link" data-scroll-target="#routes.txt"><span class="toc-section-number">4.1.3</span>  routes.txt</a></li>
  <li><a href="#trips.txt" id="toc-trips.txt" class="nav-link" data-scroll-target="#trips.txt"><span class="toc-section-number">4.1.4</span>  trips.txt</a></li>
  <li><a href="#calendar.txt" id="toc-calendar.txt" class="nav-link" data-scroll-target="#calendar.txt"><span class="toc-section-number">4.1.5</span>  calendar.txt</a></li>
  <li><a href="#shapes.txt" id="toc-shapes.txt" class="nav-link" data-scroll-target="#shapes.txt"><span class="toc-section-number">4.1.6</span>  shapes.txt</a></li>
  <li><a href="#stop_times.txt" id="toc-stop_times.txt" class="nav-link" data-scroll-target="#stop_times.txt"><span class="toc-section-number">4.1.7</span>  stop_times.txt</a></li>
  <li><a href="#frequencies.txt" id="toc-frequencies.txt" class="nav-link" data-scroll-target="#frequencies.txt"><span class="toc-section-number">4.1.8</span>  frequencies.txt</a></li>
  </ul></li>
  <li><a href="#onde-encontrar-dados-gtfs-de-cidades-brasileiras" id="toc-onde-encontrar-dados-gtfs-de-cidades-brasileiras" class="nav-link" data-scroll-target="#onde-encontrar-dados-gtfs-de-cidades-brasileiras"><span class="toc-section-number">4.2</span>  Onde encontrar dados GTFS de cidades brasileiras</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/ipeaGIT/aop_curso/edit/main/4_dados_gtfs.qmd" class="toc-action">Editar essa página</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-4_dados_gtfs" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Dados GTFS</span></span></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Autores</div>
  <div class="quarto-title-meta-heading">Afiliação</div>
  
    <div class="quarto-title-meta-contents">
    <a href="https://www.urbandemographics.org/about/">Rafael H. M. Pereira</a> <a href="https://orcid.org/0000-0003-2125-7465" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Ipea - Instituto de Pesquisa Econômica Aplicada
          </p>
      </div>
      <div class="quarto-title-meta-contents">
    <a href="https://dhersz.netlify.app/en/">Daniel Herszenhut</a> <a href="https://orcid.org/0000-0001-8066-1105" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Ipea - Instituto de Pesquisa Econômica Aplicada
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  

</header>

<p>O formato GTFS é uma especificação aberta e colaborativa que visa descrever os principais componentes de uma rede de transporte público. Originalmente criada em meados dos anos 2000 por uma parceria entre Google e TriMet, a agência de transporte de Portland, Oregon, nos Estados Unidos, a especificação GTFS hoje é utilizada por agências de transporte em milhares de cidades, espalhadas por todos os continentes do globo <span class="citation" data-cites="mchugh2013pioneering">(<a href="references.html#ref-mchugh2013pioneering" role="doc-biblioref">McHugh 2013</a>)</span>. Atualmente, esta especificação é dividida em dois componentes distintos:</p>
<ul>
<li>O GTFS <em>Schedule</em>, ou GTFS <em>Static</em>, que contém o cronograma planejado de linhas de transporte público, informações sobre suas tarifas e informações espaciais sobre os seus itinerários;</li>
<li>O GTFS <em>Realtime</em>, que contém informações de localização de veículos em tempo real e alertas de possíveis atrasos, de mudanças de percurso e de eventos que possam interferir no cronograma planejado.</li>
</ul>
<p>Ao longo desta seção, focaremos no <strong>GTFS <em>Schedule</em></strong>, por ser o formato de GTFS mais amplamente utilizado por agências de transporte e em análises de acessibilidade. Clique <a href="https://gtfs.org/realtime/">aqui</a> para mais informações sobre o GTFS <em>Realtime</em>.</p>
<p>Por ser uma especificação aberta e colaborativa, o formato GTFS tenta abarcar em sua definição um grande número de usos distintos que agências de transporte e desenvolvedores de ferramentas possam dar a ele. No entanto, agências e <em>softwares</em> podem ainda assim depender de informações que não constem na especificação oficial. Surgem, dessa forma, extensões da especificação. Algumas dessas <a href="https://gtfs.org/extensions/">extensões</a> podem eventualmente se tornar parte da especificação oficial, caso isto seja aceito pela comunidade de usuários do GTFS. Nesta seção, focaremos em um subconjunto de informações presentes no formato GTFS <em>Schedule</em> “puro”, e, portanto, não cobriremos suas extensões.</p>
<section id="estrutura-de-arquivos-gtfs" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="estrutura-de-arquivos-gtfs"><span class="header-section-number">4.1</span> Estrutura de arquivos GTFS</h2>
<p>Arquivos no formato GTFS <em>Schedule</em> (daqui em diante chamado apenas de GTFS) também são conhecidos pela denominação <em>feed</em><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Um <em>feed</em> é nada mais do que um arquivo comprimido em formato <code>.zip</code> que contém um conjunto de tabelas, salvas em formato <code>.txt</code>, com algumas informações sobre a rede de transporte público (localização das paradas, frequências das viagens, traçado das rotas, entre outras). Como em uma base de dados relacional, as tabelas de um <em>feed</em> possuem colunas-chaves que permitem vincular os dados de rotas, viagens e tabelas de horários entre si. O esquema geral do GTFS é apresentado na <a href="#fig-scheme">Figura&nbsp;<span>4.1</span></a>, que mostra algumas das principais tabelas que compõem a especificação e destaca como elas se relacionam a partir de suas colunas-chaves.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-scheme" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/gtfs_scheme.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figura&nbsp;4.1: Esquema do formato GTFS. Fonte - <span class="citation" data-cites="pereira2022exploring">Pereira, Andrade, e Vieira (<a href="references.html#ref-pereira2022exploring" role="doc-biblioref">2022</a>)</span></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Ao todo, 22 tabelas compõem o formato GTFS<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Nem todas, no entanto, devem estar obrigatoriamente presentes para que um <em>feed</em> seja considerado válido - sendo consideradas, portanto, opcionais. A especificação classifica cada tabela conforme sua obrigatoriedade em três possíveis categorias: obrigatórias, opcionais e condicionalmente obrigatórias (quando a obrigatoriedade de uma tabela depende da existência de uma determinada tabela, coluna ou valor). Para fins de simplicidade, neste livro consideraremos apenas as duas primeiras categorias e faremos comentários quanto à obrigatoriedade de cada tabela quando apropriado. Desta forma, ficam assim classificadas as tabelas:</p>
<ul>
<li><strong>Obrigatórias</strong>: <code>agency.txt</code>, <code>stops.txt</code>, <code>routes.txt</code>, <code>trips.txt</code>, <code>stop_times.txt</code>, <code>calendar.txt</code>.</li>
<li><strong>Opcionais</strong>: <code>calendar_dates.txt</code>, <code>fare_attributes.txt</code>, <code>fare_rules.txt</code>, <code>fare_products.txt</code>, <code>fare_leg_rules.txt</code>, <code>fare_transfer_rules.txt</code>, <code>areas.txt</code>, <code>stop_areas.txt</code>, <code>shapes.txt</code>, <code>frequencies.txt</code>, <code>transfers.txt</code>, <code>pathways.txt</code>, <code>levels.txt</code>, <code>translations.txt</code>, <code>feed_info.txt</code>, <code>attributions.txt</code>.</li>
</ul>
<p>Ao longo desta seção, aprenderemos sobre a estrutura básica de um arquivo GTFS e das tabelas que o compõem. Portanto, vamos olhar apenas para as tabelas obrigatórias e para as tabelas opcionais mais frequentemente utilizadas por produtores e consumidores desses arquivos. Para mais informações sobre as tabelas e as colunas não abordadas nesta seção, por favor verifique a <a href="https://gtfs.org/schedule/reference/">especificação oficial</a>.</p>
<p>Nesta demonstração, utilizaremos um subconjunto de dados provenientes do <em>feed</em> da cidade de São Paulo criado pela SPTrans<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> e baixado em outubro de 2019. O <em>feed</em> contém as seis tabelas obrigatórias e mais duas tabelas opcionais bastante utilizadas, a <code>shapes.txt</code> e a <code>frequencies.txt</code>, o que permite uma boa visão geral sobre o formato GTFS.</p>
<div class="cell">

</div>
<section id="agency.txt" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="agency.txt"><span class="header-section-number">4.1.1</span> agency.txt</h3>
<p>Arquivo utilizado para descrever as operadoras de transporte que atuam no sistema descrito pelo arquivo GTFS. Embora o termo <em>agency</em> (agência) seja usado em lugar de <em>operators</em> (operadoras), por exemplo, fica a cargo do produtor do <em>feed</em> definir quais instituições serão listadas na tabela.</p>
<p>Por exemplo: múltiplas concessionárias de ônibus atuam em um determinado local, mas todo o planejamento de cronograma e de tarifa é realizado por uma única instituição, em geral uma secretaria de transporte ou empresa pública específica. Esta instituição é também entendida pelos usuários do sistema como a operadora, de fato. Neste caso, devemos listar a instituição responsável pelo planejamento na tabela.</p>
<p>Agora, imagine um sistema em que a agência de transporte público local transfere a responsabilidade da operação de um sistema multimodal a diversas empresas, por meio de concessões. Cada uma dessas empresas é responsável pelo planejamento de cronogramas e tarifas dos modos que operam, desde que sejam seguidos determinados parâmetros pré-estabelecidos em contrato. Neste caso, devemos listar as operadoras (concessionárias) na tabela, e não a agência de transporte público em si.</p>
<p>A <a href="#tbl-agency">Tabela&nbsp;<span>4.1</span></a> mostra o arquivo <code>agency.txt</code> do <em>feed</em> da SPTrans. Como podemos ver, os responsáveis pelo <em>feed</em> optaram por listar a própria empresa no arquivo, e não as concessionárias que operam os ônibus e o metrô da cidade.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-agency" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.1: Exemplo de arquivo <code>agency.txt</code></caption>
<colgroup>
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 44%">
<col style="width: 19%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">agency_id</th>
<th style="text-align: left;">agency_name</th>
<th style="text-align: left;">agency_url</th>
<th style="text-align: left;">agency_timezone</th>
<th style="text-align: left;">agency_lang</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">SPTRANS</td>
<td style="text-align: left;">http://www.sptrans.com.br/?versao=011019</td>
<td style="text-align: left;">America/Sao_Paulo</td>
<td style="text-align: left;">pt</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>É necessário notar que, embora estejamos apresentando o <code>agency.txt</code> em formato de tabela, o arquivo deve ser formatado como se fosse salvo em formato <code>.csv</code>. Ou seja, os valores de cada célula da tabela devem ser separados por vírgulas, e cada linha da tabela deve constar em uma linha no arquivo. A tabela acima, por exemplo, é definida da seguinte forma:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>agency_id,agency_name,agency_url,agency_timezone,agency_lang
1,SPTRANS,http://www.sptrans.com.br/?versao=011019,America/Sao_Paulo,pt </code></pre>
</div>
</div>
<p>Por uma questão de comunicação e interpretação dos dados, ao longo desta seção sempre apresentaremos os exemplos em formato de tabela. É importante ter em mente, porém, que essas tabelas são organizadas como mostrado acima.</p>
</section>
<section id="stops.txt" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="stops.txt"><span class="header-section-number">4.1.2</span> stops.txt</h3>
<p>Arquivo usado para descrever as paradas de transporte público que compõem o sistema. Os pontos listados neste arquivo podem fazer menção a paradas mais simples (como pontos de ônibus), estações, plataformas, entradas e saídas de estações, <em>etc</em>. A <a href="#tbl-stops">Tabela&nbsp;<span>4.2</span></a> mostra o <code>stops.txt</code> do <em>feed</em> da SPTrans.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-stops" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.2: Exemplo de arquivo <code>stops.txt</code></caption>
<colgroup>
<col style="width: 6%">
<col style="width: 16%">
<col style="width: 61%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">stop_id</th>
<th style="text-align: left;">stop_name</th>
<th style="text-align: left;">stop_desc</th>
<th style="text-align: right;">stop_lat</th>
<th style="text-align: right;">stop_lon</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">706325</td>
<td style="text-align: left;">Parada 14 Bis B/C</td>
<td style="text-align: left;">Viad. Dr.&nbsp;Plínio De Queiroz, 901</td>
<td style="text-align: right;">-23.55593</td>
<td style="text-align: right;">-46.65011</td>
</tr>
<tr class="even">
<td style="text-align: left;">810602</td>
<td style="text-align: left;">R. Sta. Rita, 56</td>
<td style="text-align: left;">Ref.: R. Bresser / R. João Boemer</td>
<td style="text-align: right;">-23.53337</td>
<td style="text-align: right;">-46.61229</td>
</tr>
<tr class="odd">
<td style="text-align: left;">910776</td>
<td style="text-align: left;">Av. Do Estado, 5854</td>
<td style="text-align: left;">Ref.: Rua Dona Ana Néri</td>
<td style="text-align: right;">-23.55896</td>
<td style="text-align: right;">-46.61520</td>
</tr>
<tr class="even">
<td style="text-align: left;">1010092</td>
<td style="text-align: left;">Parada Caetano Pinto</td>
<td style="text-align: left;">Av. Rangel Pestana, 1249 Ref.: Rua Caetano Pinto/rua Prof.&nbsp;Batista De Andrade</td>
<td style="text-align: right;">-23.54615</td>
<td style="text-align: right;">-46.62218</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1010093</td>
<td style="text-align: left;">Parada Piratininga</td>
<td style="text-align: left;">Av. Rangel Pestana, 1479 Ref.: Rua Monsenhor Andrade</td>
<td style="text-align: right;">-23.54509</td>
<td style="text-align: right;">-46.62006</td>
</tr>
<tr class="even">
<td style="text-align: left;">1010099</td>
<td style="text-align: left;">R. Xavantes, 612</td>
<td style="text-align: left;">Ref.: Rua Joli</td>
<td style="text-align: right;">-23.53545</td>
<td style="text-align: right;">-46.61368</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>As colunas <code>stop_id</code> e <code>stop_name</code> servem como identificadores de cada parada, porém cumprem papéis distintos. O principal propósito da <code>stop_id</code> é identificar relações entre esta tabela e outras que compõem a especificação (como veremos mais à frente no arquivo <code>stop_times.txt</code>, por exemplo). Já a coluna <code>stop_name</code> cumpre o papel de um identificador facilmente reconhecido pelo passageiro. Seus valores, portanto, costumam ser nomes de estações, nomes de pontos de interesse da cidade ou endereços (como no caso do <em>feed</em> da SPTrans).</p>
<p>A coluna <code>stop_desc</code>, presente no <em>feed</em> da SPTrans, é opcional e permite à agência de transporte adicionar uma descrição de cada parada e de seu entorno. As colunas <code>stop_lat</code> e <code>stop_lon</code>, por fim, são as responsáveis por associar cada parada a uma posição espacial, através de suas coordenadas geográficas de latitude e longitude.</p>
<p>Entre as colunas opcionais não presentes no <em>stops.txt</em> deste <em>feed</em> estão a <code>location_type</code> e a <code>parent_station</code>. A <code>location_type</code> é utilizada para denotar o tipo de localização a que cada ponto se refere. Quando ausente, todos os pontos são interpretados como paradas de transporte público, mas valores distintos podem ser usados para distinguir uma parada (<code>location_type = 0</code>) de uma estação (<code>location_type = 1</code>) ou uma área de embarque (<code>location_type = 2</code>), por exemplo. A coluna <code>parent_station</code>, por sua vez, é utilizada para descrever relações de hierarquia entre dois pontos. Por exemplo, uma área de desembarque deve dizer a qual parada/plataforma ela pertence, assim como uma parada/plataforma pode também, opcionalmente, listar a qual estação ela pertence.</p>
</section>
<section id="routes.txt" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="routes.txt"><span class="header-section-number">4.1.3</span> routes.txt</h3>
<p>Arquivo usado para descrever as linhas de transporte público que rodam no sistema, incluindo os modos de transporte utilizados em cada uma. A <a href="#tbl-routes">Tabela&nbsp;<span>4.3</span></a> mostra o <code>routes.txt</code> do <em>feed</em> da SPTrans.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-routes" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.3: Exemplo de arquivo <code>routes.txt</code></caption>
<colgroup>
<col style="width: 11%">
<col style="width: 13%">
<col style="width: 22%">
<col style="width: 38%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">route_id</th>
<th style="text-align: left;">agency_id</th>
<th style="text-align: left;">route_short_name</th>
<th style="text-align: left;">route_long_name</th>
<th style="text-align: right;">route_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CPTM L07</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">CPTM L07</td>
<td style="text-align: left;">JUNDIAI - LUZ</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L08</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">CPTM L08</td>
<td style="text-align: left;">AMADOR BUENO - JULIO PRESTES</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPTM L09</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">CPTM L09</td>
<td style="text-align: left;">GRAJAU - OSASCO</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L10</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">CPTM L10</td>
<td style="text-align: left;">RIO GRANDE DA SERRA - BRÁS</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPTM L11</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">CPTM L11</td>
<td style="text-align: left;">ESTUDANTES - LUZ</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L12</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">CPTM L12</td>
<td style="text-align: left;">CALMON VIANA - BRAS</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Assim como no caso do arquivo <code>stops.txt</code>, a tabela do <code>routes.txt</code> também possui diferentes colunas que apontam o identificador de cada linha (<code>route_id</code>) e o seu nome. Neste caso, no entanto, existem duas colunas de nome: a <code>route_short_name</code> e a <code>route_long_name</code>. A primeira diz respeito ao nome da linha, usualmente utilizado por passageiros no dia-a-dia, enquanto o segundo tende a ser um nome mais descritivo. A SPTrans, por exemplo, optou por destacar os pontos finais de cada linha nesta coluna. Podemos notar também que os mesmos valores se repetem nas colunas <code>route_id</code> e <code>route_short_name</code>, o que não é obrigatório e nem proibido - neste caso, o produtor do <em>feed</em> julgou que os nomes das linhas poderiam funcionar satisfatoriamente como identificadores por serem razoavelmente curtos e não se repetirem.</p>
<p>A coluna <code>agency_id</code> é a chave que permite relacionar a tabela das rotas com a tabela descrita no <code>agency.txt</code>. Ela faz menção a uma agência descrita naquele arquivo, no caso a agência de id <code>1</code> (a própria SPTrans). Esta coluna é opcional no caso de <em>feeds</em> em que existe apenas uma agência, porém é obrigatória no caso em que existem mais de uma. Imaginemos, por exemplo, um <em>feed</em> que descreve um sistema multimodal que conta com um corredor de metrô e diversas linhas de ônibus: uma configuração possível de <code>routes.txt</code> descreveria as linhas de metrô como de responsabilidade da operadora do metrô, e as de ônibus como de responsabilidade da empresa responsável pelo planejamento das linhas de ônibus, por exemplo.</p>
<p>A coluna <code>route_type</code> é utilizada para descrever o modo de transporte utilizado em cada linha. Esta coluna aceita diferentes números, cada um representando um determinado modo. Este exemplo descreve linhas de trem, cujo valor numérico correspondente é <code>2</code>. Os valores correspondentes para outros modos de transporte são listados na <a href="https://gtfs.org/schedule/reference/#routestxt">especificação</a>.</p>
</section>
<section id="trips.txt" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="trips.txt"><span class="header-section-number">4.1.4</span> trips.txt</h3>
<p>Arquivo usado para descrever as viagens realizadas no sistema. A viagem é a unidade básica de movimento do formato GTFS: cada viagem é associada a uma linha de transporte público (<code>route_id</code>), a um serviço que opera em determinados dias da semana (como veremos mais à frente no arquivo <code>calendar.txt</code>) e a uma trajetória espacial (como veremos mais à frente no arquivo <code>shapes.txt</code>). A <a href="#tbl-trips">Tabela&nbsp;<span>4.4</span></a> mostra o <code>trips.txt</code> do <em>feed</em> da SPTrans.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-trips" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.4: Exemplo de arquivo <code>trips.txt</code></caption>
<colgroup>
<col style="width: 16%">
<col style="width: 13%">
<col style="width: 16%">
<col style="width: 20%">
<col style="width: 19%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">trip_id</th>
<th style="text-align: left;">route_id</th>
<th style="text-align: left;">service_id</th>
<th style="text-align: left;">trip_headsign</th>
<th style="text-align: right;">direction_id</th>
<th style="text-align: left;">shape_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">CPTM L07</td>
<td style="text-align: left;">USD</td>
<td style="text-align: left;">JUNDIAI</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">17846</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L07-1</td>
<td style="text-align: left;">CPTM L07</td>
<td style="text-align: left;">USD</td>
<td style="text-align: left;">LUZ</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">17847</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPTM L08-0</td>
<td style="text-align: left;">CPTM L08</td>
<td style="text-align: left;">USD</td>
<td style="text-align: left;">AMADOR BUENO</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">17848</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L08-1</td>
<td style="text-align: left;">CPTM L08</td>
<td style="text-align: left;">USD</td>
<td style="text-align: left;">JULIO PRESTES</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">17849</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPTM L09-0</td>
<td style="text-align: left;">CPTM L09</td>
<td style="text-align: left;">USD</td>
<td style="text-align: left;">GRAJAU</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">17850</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L09-1</td>
<td style="text-align: left;">CPTM L09</td>
<td style="text-align: left;">USD</td>
<td style="text-align: left;">OSASCO</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">17851</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A coluna <code>trip_id</code> identifica cada uma das viagens descritas na tabela, assim como a <code>route_id</code> faz referência a uma linha de transporte público identificada no arquivo <code>routes.txt</code>. A coluna <code>service_id</code> identifica serviços que determinam os dias da semana em que cada uma das viagens opera (dias úteis, finais de semana, uma mistura dos dois, <em>etc</em>), descritos detalhadamente no arquivo <code>calendar.txt</code>. A última coluna à direita na tabela acima é a <code>shape_id</code>, que identifica a trajetória espacial de cada uma das viagens, descrita em detalhes no arquivo <code>shapes.txt</code>.</p>
<p>As duas colunas restantes, <code>trip_headsign</code> e <code>direction_id</code>, são opcionais e devem ser utilizadas para descrever o sentido/destino da viagem. A primeira, <code>trip_headsign</code>, é utilizada para ditar o texto que aparece no letreiro de veículos (no caso de um ônibus, por exemplo) ou em painéis informativos (como em metrôs e trens) destacando o destino da viagem. Já a coluna <code>direction_id</code> é frequentemente utilizada em conjunto com a primeira para dar uma conotação de ida ou volta para cada viagem, onde <code>0</code> representa ida e <code>1</code> volta, ou vice-versa (assim como ida e volta são conceitos que mudam conforme o referencial, os valores <code>0</code> e <code>1</code> podem ser usados como desejado, desde que um represente um sentido e o outro o contrário). No caso do nosso exemplo, as duas primeiras linhas são viagens que fazem menção à mesma rota de transporte público (<code>CPTM L07</code>), porém em sentidos opostos: uma corre em direção a Jundiaí, e a outra à Luz.</p>
</section>
<section id="calendar.txt" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="calendar.txt"><span class="header-section-number">4.1.5</span> calendar.txt</h3>
<p>Arquivo usado para descrever os diferentes tipos de serviço existentes no sistema. Um serviço, neste contexto, denota um conjunto de dias da semana em que viagens são realizadas. Cada serviço também é definido pela data em que começa a valer e pela data a partir do qual ele não é mais válido. A <a href="#tbl-calendar">Tabela&nbsp;<span>4.5</span></a> mostra o <code>calendar.txt</code> do <em>feed</em> da SPTrans.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-calendar" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.5: Exemplo de arquivo <code>calendar.txt</code></caption>
<colgroup>
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 12%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">service_id</th>
<th style="text-align: right;">monday</th>
<th style="text-align: right;">tuesday</th>
<th style="text-align: right;">wednesday</th>
<th style="text-align: right;">thursday</th>
<th style="text-align: right;">friday</th>
<th style="text-align: right;">saturday</th>
<th style="text-align: right;">sunday</th>
<th style="text-align: right;">start_date</th>
<th style="text-align: right;">end_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">USD</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20080101</td>
<td style="text-align: right;">20200501</td>
</tr>
<tr class="even">
<td style="text-align: left;">U__</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">20080101</td>
<td style="text-align: right;">20200501</td>
</tr>
<tr class="odd">
<td style="text-align: left;">US_</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">20080101</td>
<td style="text-align: right;">20200501</td>
</tr>
<tr class="even">
<td style="text-align: left;">_SD</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20080101</td>
<td style="text-align: right;">20200501</td>
</tr>
<tr class="odd">
<td style="text-align: left;">__D</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20080101</td>
<td style="text-align: right;">20200501</td>
</tr>
<tr class="even">
<td style="text-align: left;"><em>S</em></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">20080101</td>
<td style="text-align: right;">20200501</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A coluna <code>service_id</code> identifica cada um dos serviços descritos na tabela. Como mostrado anteriormente, este identificador é usado também no arquivo <code>trips.txt</code>, e é o responsável por associar cada viagem a um determinado serviço.</p>
<p>As colunas <code>monday</code>, <code>tuesday</code>, <code>wednesday</code>, <code>thursday</code>, <code>friday</code>, <code>saturday</code> e <code>sunday</code> (segunda-feira a domingo, em inglês) são utilizadas para delimitar os dias em que cada serviço funciona. Um valor de <code>1</code> significa que o serviço opera naquele dia, enquanto um valor de <code>0</code> significa que ele não opera. Como podemos ver no exemplo acima, o serviço <code>USD</code> opera em todos os dias da semana. Já o serviço <code>U__</code> opera apenas em dias úteis.</p>
<p>Por fim, as colunas <code>start_date</code> e <code>end_date</code> delimitam o intervalo em que cada serviço é válido. As datas do formato GTFS são sempre formatadas segundo a regra <code>YYYYMMDD</code> - ou seja, os primeiros quatro números definem o ano, os dois subsequentes definem o mês e os últimos dois, o dia. O valor <code>20220428</code>, por exemplo, representa o dia 28 de abril de 2022.</p>
</section>
<section id="shapes.txt" class="level3" data-number="4.1.6">
<h3 data-number="4.1.6" class="anchored" data-anchor-id="shapes.txt"><span class="header-section-number">4.1.6</span> shapes.txt</h3>
<p>Arquivo usado para descrever a trajetória espacial de cada viagem listada no <em>feed</em>. Este arquivo é opcional, mas é fortemente recomendado que agências de transporte o incluam em seus arquivos GTFS. A <a href="#tbl-shapes">Tabela&nbsp;<span>4.6</span></a> mostra o <code>shapes.txt</code> do <em>feed</em> da SPTrans.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-shapes" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.6: Exemplo de arquivo <code>shapes.txt</code></caption>
<thead>
<tr class="header">
<th style="text-align: left;">shape_id</th>
<th style="text-align: right;">shape_pt_lat</th>
<th style="text-align: right;">shape_pt_lon</th>
<th style="text-align: right;">shape_pt_sequence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">17846</td>
<td style="text-align: right;">-23.53517</td>
<td style="text-align: right;">-46.63535</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">17846</td>
<td style="text-align: right;">-23.53513</td>
<td style="text-align: right;">-46.63548</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17846</td>
<td style="text-align: right;">-23.53494</td>
<td style="text-align: right;">-46.63626</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">17846</td>
<td style="text-align: right;">-23.53473</td>
<td style="text-align: right;">-46.63710</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17846</td>
<td style="text-align: right;">-23.53466</td>
<td style="text-align: right;">-46.63735</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">17846</td>
<td style="text-align: right;">-23.53416</td>
<td style="text-align: right;">-46.63866</td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A coluna <code>shape_id</code> identifica cada uma das trajetórias descritas na tabela. Como mostrado anteriormente, este identificador é usado também no arquivo <code>trips.txt</code>, e é o responsável por associar cada viagem à sua trajetória espacial. Diferentemente de todos os outros identificadores que vimos até então, no entanto, o identificador <code>shape_id</code> se repete em diversas observações da tabela. Isto porque o arquivo associa cada <code>shape_id</code> a uma série de pontos espaciais, cujas coordenadas geográficas são descritas nas colunas <code>shape_pt_lat</code> e <code>shape_pt_lon</code>. A coluna <code>shape_pt_sequence</code> lista a sequência na qual os pontos se conectam para formar a trajetória de cada <code>shape_id</code>. Os valores listados nesta coluna devem ser ordenados de forma crescente.</p>
</section>
<section id="stop_times.txt" class="level3" data-number="4.1.7">
<h3 data-number="4.1.7" class="anchored" data-anchor-id="stop_times.txt"><span class="header-section-number">4.1.7</span> stop_times.txt</h3>
<p>Arquivo usado para descrever a tabela de horários de cada viagem, incluindo o horário de chegada e partida em cada uma das paradas. A formatação deste arquivo depende da existência ou não de um arquivo <code>frequencies.txt</code>, detalhe que cobriremos mais adiante. Por enquanto, olharemos para o <code>stop_times.txt</code> do <em>feed</em> da SPTrans, que também conta com um <code>frequencies.txt</code>, na <a href="#tbl-stop_times">Tabela&nbsp;<span>4.7</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-stop_times" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.7: Exemplo de arquivo <code>stop_times.txt</code></caption>
<thead>
<tr class="header">
<th style="text-align: left;">trip_id</th>
<th style="text-align: left;">arrival_time</th>
<th style="text-align: left;">departure_time</th>
<th style="text-align: left;">stop_id</th>
<th style="text-align: right;">stop_sequence</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">04:00:00</td>
<td style="text-align: left;">04:00:00</td>
<td style="text-align: left;">18940</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">04:08:00</td>
<td style="text-align: left;">04:08:00</td>
<td style="text-align: left;">18920</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">04:16:00</td>
<td style="text-align: left;">04:16:00</td>
<td style="text-align: left;">18919</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">04:24:00</td>
<td style="text-align: left;">04:24:00</td>
<td style="text-align: left;">18917</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">04:32:00</td>
<td style="text-align: left;">04:32:00</td>
<td style="text-align: left;">18916</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">04:40:00</td>
<td style="text-align: left;">04:40:00</td>
<td style="text-align: left;">18965</td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A viagem cuja tabela de horários está sendo descrita é identificada pela coluna <code>trip_id</code>. De forma análoga ao que acontece na tabela de trajetórias, um mesmo <code>trip_id</code> se repete em muitas observações da tabela. Isto porque, assim como uma trajetória é composta por uma sequência de pontos espaciais, uma tabela de horários é composta por uma sequência de diversos horários de partida/chegada em diversas paradas de transporte público.</p>
<p>As colunas seguintes, <code>arrival_time</code>, <code>departure_time</code> e <code>stop_id</code>, são as responsáveis por descrever o cronograma de cada viagem, associando um horário de chegada e um horário de partida a cada uma das paradas visitadas na viagem. As colunas de horário são formatadas segundo a regra <code>HH:MM:SS</code> - ou seja, os dois primeiros números definem a hora, os dois subsequentes os minutos e os últimos dois, os segundos. Esta formatação aceita valores de hora maiores do que <code>24</code>: ou seja, uma viagem cuja última parada é visitada às 1h da manhã do dia seguinte ao que começou a rodar (digamos que ela tenha partido do ponto inicial às 23h) deve ter como horário de chegada <code>25:00:00</code>, e não <code>01:00:00</code>. A coluna <code>stop_id</code>, por sua vez, associa os horários de chegada e partida a uma parada descrita no arquivo <code>stops.txt</code>. Por fim, a coluna <code>stop_sequence</code> lista a sequência na qual cada parada se conecta às demais para formar o cronograma da viagem. Seus valores devem ser sempre ordenados de forma crescente.</p>
<p>Vale destacar aqui a diferença entre os arquivos <code>shapes.txt</code> e <code>stop_times.txt</code>. Embora os dois descrevam uma viagem espacialmente, eles o fazem de forma diferente. O <code>stop_times.txt</code> descreve a sequência de paradas e horários que compõem um cronograma, mas nada diz sobre o trajeto percorrido pelo veículo entre cada uma das paradas. Já o <code>shapes.txt</code> traz a trajetória detalhada da viagem como um todo, mas não descreve em que ponto do espaço estão as paradas da viagem. Quando usamos os dois arquivos em conjunto, portanto, sabemos tanto o cronograma de cada viagem quanto a trajetória espacial da viagem entre paradas.</p>
</section>
<section id="frequencies.txt" class="level3" data-number="4.1.8">
<h3 data-number="4.1.8" class="anchored" data-anchor-id="frequencies.txt"><span class="header-section-number">4.1.8</span> frequencies.txt</h3>
<p>Arquivo opcional usado para descrever a frequência de cada viagem dentro de um determinado período do dia. A <a href="#tbl-frequencies">Tabela&nbsp;<span>4.8</span></a> mostra o <code>frequencies.txt</code> do <em>feed</em> da SPTrans.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-frequencies" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.8: Exemplo de arquivo <code>frequencies.txt</code></caption>
<thead>
<tr class="header">
<th style="text-align: left;">trip_id</th>
<th style="text-align: left;">start_time</th>
<th style="text-align: left;">end_time</th>
<th style="text-align: right;">headway_secs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">04:00:00</td>
<td style="text-align: left;">04:59:00</td>
<td style="text-align: right;">720</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">05:00:00</td>
<td style="text-align: left;">05:59:00</td>
<td style="text-align: right;">360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">06:00:00</td>
<td style="text-align: left;">06:59:00</td>
<td style="text-align: right;">360</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">07:00:00</td>
<td style="text-align: left;">07:59:00</td>
<td style="text-align: right;">360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">08:00:00</td>
<td style="text-align: left;">08:59:00</td>
<td style="text-align: right;">360</td>
</tr>
<tr class="even">
<td style="text-align: left;">CPTM L07-0</td>
<td style="text-align: left;">09:00:00</td>
<td style="text-align: left;">09:59:00</td>
<td style="text-align: right;">480</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A viagem cuja frequência está sendo descrita é identificada pela coluna <code>trip_id</code>. Novamente, um mesmo identificador pode aparecer em várias observações da tabela. Isto porque a especificação GTFS prevê que uma mesma viagem pode ter frequências diferentes ao longo do dia (como em horários de pico e fora-pico, por exemplo). Assim, cada linha da tabela descreve um período do dia que se inicia no horário descrito na coluna <code>start_time</code> e termina no horário assinalado na coluna <code>end_time</code>.</p>
<p>Dentro do período especificado por essas duas colunas, a viagem possui um <em>headway</em> detalhado na coluna <code>headway_secs</code>. O <em>headway</em> é o tempo que separa a passagem de dois veículos que operam a mesma linha de transporte público. No caso desta tabela, esse tempo deve ser especificado em segundos. Um valor de <code>720</code> entre 04:00h e 05:00h, portanto, significa que a viagem <code>CPTM L07-0</code> ocorre de 12 em 12 minutos dentro deste período.</p>
<p><strong>Usando as tabelas <code>frequencies.txt</code> e <code>stop_times.txt</code> conjuntamente</strong></p>
<p>É importante entender, agora, como a presença da tabela <code>frequencies.txt</code> altera a especificação da tabela <code>stop_times.txt</code>. Como podemos ver no exemplo da tabela <code>stop_times.txt</code>, a viagem <code>CPTM L07-0</code> parte da primeira parada às 04:00h e chega na segunda às 04:08h. O cronograma de chegada e saída de uma mesma parada de uma viagem, no entanto, não pode ser definido mais de uma vez na tabela. Como então definir o cronograma das viagens que partem às 04:12h, 04:24h, 04:36h, <em>etc</em> (lembrando que o <em>headway</em> desta viagem é de 12 minutos)?</p>
<p>No caso em que a frequência de uma viagem é especificada no <code>frequencies.txt</code>, o cronograma (a tabela de horários) de uma viagem definido no <code>stop_times.txt</code> deve ser entendido como uma referência que descreve o tempo entre paradas. Isto é, os horários ali definidos não devem ser interpretados à risca. Por exemplo, o cronograma listado estabelece que o tempo de viagem entre a primeira e a segunda parada é de 8 minutos, e o tempo entre a segunda e a terceira também. Ou seja, a viagem que parte da primeira parada às 04:00h chega na segunda às 04:08h, e na terceira às 04:16h. A próxima viagem, que parte da primeira parada às 04:12h, por sua vez, chega na segunda parada às 04:20h, e na terceira às 04:28h.</p>
<p>Entretanto, poderíamos descrever as mesmas viagens no <code>stop_times.txt</code> sem fazer uso do arquivo <code>frequencies.txt</code>. Para isso, poderíamos adicionar um sufixo que identificasse cada uma das viagens referentes à linha <code>CPTM L07</code> no sentido <code>0</code> ao longo do dia. A viagem (<code>trip_id</code>) com identificador <code>CPTM L07-0_1</code>, por exemplo, seria a primeira viagem no sentido <code>0</code> do dia e partiria da primeira parada às 04:00h e chegaria na segunda às 04:08h. A viagem <code>CPTM L07-0_2</code>, por sua vez, seria a segunda viagem e partiria da primeira parada às 04:12h e chegaria na segunda às 04:20h, e daí em diante. Cada uma dessas viagens deveria ser também adicionada ao arquivo <code>trips.txt</code> e a quaisquer outros que possuam a coluna <code>trip_id</code> como identificador.</p>
<p>Outra variável que afeta a forma na qual o <code>frequencies.txt</code> afeta as tabelas de horários na tabela <code>stop_times.txt</code> é a coluna opcional <code>exact_times</code>. Um valor de <code>0</code> nesta coluna (ou quando ela está ausente do <em>feed</em>, como no caso do arquivo GTFS da SPTrans) indica que a viagem não necessariamente segue um cronograma fixo ao longo do período. Em vez disso, operadores tentam se ater a um determinado <em>headway</em> durante o período. Usando o mesmo exemplo de uma viagem cujo <em>headway</em> é de 12 minutos entre as 04:00h e 05:00h, isto significaria que não necessariamente a primeira partida sairá exatamente às 04:00h, a segunda às 04:12h, e por aí em diante. A primeira pode, por exemplo, sair às 04:02h. A segunda, às 04:14h ou 04:13h, etc. Caso desejemos definir um cronograma que é seguido à risca, obtendo o mesmo resultado que seria obtido se definíssemos diversas viagens semelhantes partindo em diferentes horários no <code>stop_times.txt</code> (como mostrado no parágrafo anterior), devemos utilizar o valor <code>1</code> na coluna <code>exact_times</code>.</p>
</section>
</section>
<section id="onde-encontrar-dados-gtfs-de-cidades-brasileiras" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="onde-encontrar-dados-gtfs-de-cidades-brasileiras"><span class="header-section-number">4.2</span> Onde encontrar dados GTFS de cidades brasileiras</h2>
<p>Os dados de GTFS de diversas cidades do mundo podem ser baixados com o pacote de R <a href="https://r-transit.github.io/tidytransit/"><code>{tidytransit}</code></a> ou no <em>site</em> <a href="https://www.transit.land/">Transitland</a>. No Brasil, diversas cidades usam dados GTFS no planejamento e operação de seus sistemas de transportes. Em muitos casos, no entanto, esses dados são de propriedade de empresas operadoras e concessionárias, e não do poder público. Infelizmente, esses arquivos raramente são disponibilizados aberta e publicamente, contrariando boas práticas de gestão e compartilhamento de dados de interesse público. A <a href="#tbl-gtfs_brasil">Tabela&nbsp;<span>4.9</span></a> mostra as fontes dos dados GTFS de algumas das poucas cidades do Brasil que disponibilizam seus <em>feeds</em> abertamente<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-gtfs_brasil" class="anchored">
<table class="table table-sm table-striped">
<caption>Tabela&nbsp;4.9: Fontes de dados GTFS publicamente disponíveis no Brasil</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Cidade</th>
<th style="text-align: left;">Fonte</th>
<th style="text-align: left;">Informações</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Belo Horizonte</td>
<td style="text-align: left;">BHTrans</td>
<td style="text-align: left;">Dado aberto: <a href="https://dados.pbh.gov.br/dataset/gtfs-estatico-do-sistema-convencional">transporte convencional</a>; <a href="https://dados.pbh.gov.br/dataset/feed-gtfs-estatico-do-sistema-suplementar">transporte suplementar</a>.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fortaleza</td>
<td style="text-align: left;">ETUFOR</td>
<td style="text-align: left;"><a href="https://dados.fortaleza.ce.gov.br/dataset/gtfs">Dado aberto</a>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Fortaleza</td>
<td style="text-align: left;">Metrofor</td>
<td style="text-align: left;"><a href="https://www.metrofor.ce.gov.br/gtfs/">Dado aberto</a>.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Porto Alegre</td>
<td style="text-align: left;">EPTC</td>
<td style="text-align: left;"><a href="https://dados.portoalegre.rs.gov.br/dataset/gtfs">Dado aberto</a>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rio de Janeiro</td>
<td style="text-align: left;">SMTR</td>
<td style="text-align: left;"><a href="https://www.data.rio/datasets/gtfs-do-rio-de-janeiro/about">Dado aberto</a>.</td>
</tr>
<tr class="even">
<td style="text-align: left;">São Paulo</td>
<td style="text-align: left;">EMTU</td>
<td style="text-align: left;">Download <a href="https://www.emtu.sp.gov.br/emtu/dados-abertos/dados-abertos-principal/gtfs.fss">neste link</a>. Necessário cadastro.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">São Paulo</td>
<td style="text-align: left;">SPTrans</td>
<td style="text-align: left;">Download <a href="https://www.sptrans.com.br/desenvolvedores/">neste link</a>. Necessário cadastro.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Observação: Os dados de GTFS disponibilizados pela Secretaria Municipal de Transportes do Rio de Janeiro não incluem os dados dos sistemas de trem e de metrô.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-mchugh2013pioneering" class="csl-entry" role="doc-biblioentry">
McHugh, Bibiana. 2013. <span>"Pioneering <span>Open Data Standards</span>: <span>The GTFS Story</span>"</span>. Em <em>Beyond <span>Transparency</span>: <span>Open Data</span> and the <span>Future</span> of <span>Civic Innovation</span></em>, editado por Brett Goldstein e Lauren Dyson, First, 125–35. <span>San Francisco, CA</span>: <span>Code for America Press</span>.
</div>
<div id="ref-pereira2022exploring" class="csl-entry" role="doc-biblioentry">
Pereira, Rafael H. M., Pedro R. Andrade, e João Pedro Bazzo Vieira. 2022. <span>"Exploring the Time Geography of Public Transport Networks with the Gtfs2gps Package"</span>. <span>SocArXiv</span>. <a href="https://doi.org/10.31235/osf.io/qydr6">https://doi.org/10.31235/osf.io/qydr6</a>.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Neste livro, utilizaremos os termos <em>feed</em>, arquivo GTFS e dados GTFS como sinônimos.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Conforme a <a href="https://gtfs.org/schedule/reference/">especificação oficial</a>, versão da revisão 9 de maio de 2022.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Disponível em <a href="https://www.sptrans.com.br/desenvolvedores/" class="uri">https://www.sptrans.com.br/desenvolvedores/</a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Levantamento realizado até o momento da publicação do livro.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./s3_dados_tp.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">SEÇÃO 3: Dados de transporte público</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./5_gtfstools.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulação e visualização de dados GTFS</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2022, Ipea - Instituto de Pesquisa Econômica Aplicada</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link active" href="https://github.com/ipeaGIT/aop_curso" aria-current="page">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>